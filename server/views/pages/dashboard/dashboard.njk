{% extends "layout.njk" %}

{% from "govuk/components/table/macro.njk" import govukTable %}

{% set pageTitle = applicationName + " - Dashboard" %}
{% set mainClasses = "govuk-body" %}
{% set hardBackLinkHref = "/" %}
{% set hardBackLinkText = "Back to pay options" %}

{% block content %}

    <div class="govuk-grid-row">
        <div class="govuk-grid-column-full">
            <h1>Pay dashboard</h1>
            <h2>People not in work</h2>
            <p>Select a status to check who is not in work, and to add and remove people.</p>
        </div>
    </div>
    <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">
            {% set rows = [] %}
            {% for payType in payTypes %}
                {% set rows = (rows.push([
                    {
                        html: '<a href="/' + payType.slug + '/pay-overview" class="govuk-link govuk-link--no-visited-state">' + payType.description + '</a>'
                    }, {
                        text: payType.prisonerCount,
                        format: "numeric"
                    }, {
                        text: (payType.prisonerCount / prisonPopulation) * 100 | round(2) ~ '%',
                        format: "numeric"
                    }
                ]), rows) %}
            {% endfor %}
            {{ govukTable({
                caption: "Preview",
                captionClasses: "govuk-visually-hidden",
                attributes: {
                    "data-qa": "pay-type-list-table"
                },
                head: [
                    {
                        text: "Status"
                    }, {
                        text: "People on the status",
                        format: "numeric"
                    }, {
                        text: "Percentage of prison population",
                        format: "numeric"
                    }
                ],
                rows: rows,
                classes: "govuk-!-margin-bottom-6"
            }) }}
        </div>
    </div>
{% endblock %}